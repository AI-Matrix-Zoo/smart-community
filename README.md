# æ™ºæ…§å°åŒºç”Ÿæ´»å¹³å°

ä¸€ä¸ªç°ä»£åŒ–çš„æ™ºæ…§å°åŒºç”Ÿæ´»æœåŠ¡å¹³å°ï¼Œæä¾›å»ºè®®åé¦ˆã€äºŒæ‰‹å¸‚åœºã€å…¬å‘Šç®¡ç†ç­‰åŠŸèƒ½ã€‚é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå¤šè§’è‰²æƒé™ç®¡ç†ã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
æ™ºæ…§å°åŒºç”Ÿæ´»å¹³å°/
â”œâ”€â”€ frontend/          # å‰ç«¯é¡¹ç›® (React + TypeScript + Vite)
â”œâ”€â”€ backend/           # åç«¯é¡¹ç›® (Node.js + TypeScript + Express)
â”œâ”€â”€ manage.sh          # å…¨æ ˆé¡¹ç›®ç®¡ç†è„šæœ¬
â””â”€â”€ README.md          # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **é‚®ç®±éªŒè¯æ³¨å†Œ**: æ”¯æŒé‚®ç®±éªŒè¯ç æ³¨å†Œ
- **é‚®ç®±ç™»å½•**: æ”¯æŒé‚®ç®±ç™»å½•
- **JWT tokenè®¤è¯**: å®‰å…¨çš„èº«ä»½éªŒè¯
- **å¤šè§’è‰²æƒé™ç®¡ç†**: ç”¨æˆ·/ç‰©ä¸š/ç®¡ç†å‘˜ä¸‰çº§æƒé™
- **å•å…ƒå·ç®¡ç†**: è¯¦ç»†çš„ä½å€ä¿¡æ¯ï¼ˆæ¥¼æ ‹+å•å…ƒå·+æˆ¿é—´å·ï¼‰

### ğŸ’¡ å»ºè®®åé¦ˆç³»ç»Ÿ
- å±…æ°‘æäº¤å»ºè®®
- ç‰©ä¸š/ç®¡ç†å‘˜å¤„ç†å»ºè®®
- å®æ—¶çŠ¶æ€æ›´æ–°å’Œè¿›åº¦è·Ÿè¸ª

### ğŸ›’ äºŒæ‰‹å¸‚åœº
- å‘å¸ƒäºŒæ‰‹ç‰©å“
- æµè§ˆå’Œæœç´¢ç‰©å“
- è”ç³»å–å®¶åŠŸèƒ½

### ğŸ“¢ å…¬å‘Šç®¡ç†
- ç‰©ä¸š/ç®¡ç†å‘˜å‘å¸ƒå…¬å‘Š
- å…¬å‘Šç¼–è¾‘å’Œåˆ é™¤
- æŒ‰æ—¶é—´æ’åºæ˜¾ç¤º

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- è§’è‰²æƒé™åˆ†é…
- ç”¨æˆ·æ•°æ®ç»Ÿè®¡

## ğŸ­ æ¼”ç¤ºè´¦æˆ·

ç³»ç»Ÿé¢„ç½®äº†ä»¥ä¸‹æ¼”ç¤ºè´¦æˆ·ä¾›æµ‹è¯•ä½¿ç”¨ï¼š

### ğŸ‘¤ ä¸šä¸»è´¦æˆ·
- **é‚®ç®±**: `resident@example.com`
- **å¯†ç **: `password123`
- **æƒé™**: åŸºç¡€ç”¨æˆ·æƒé™ï¼Œå¯ä»¥æäº¤å»ºè®®ã€ä½¿ç”¨äºŒæ‰‹å¸‚åœºç­‰

### ğŸ¢ ç‰©ä¸šè´¦æˆ·
- **é‚®ç®±**: `property@example.com`
- **å¯†ç **: `property123`
- **æƒé™**: ç‰©ä¸šç®¡ç†æƒé™ï¼Œå¯ä»¥å¤„ç†å»ºè®®ã€å‘å¸ƒå…¬å‘Šç­‰

### ğŸ‘‘ ç®¡ç†å‘˜è´¦æˆ·
- **é‚®ç®±**: `admin@example.com`
- **å¯†ç **: `admin123`
- **æƒé™**: æœ€é«˜ç®¡ç†æƒé™ï¼Œå¯ä»¥ç®¡ç†ç”¨æˆ·ã€ç³»ç»Ÿé…ç½®ç­‰

> **æ³¨æ„**: è¿™äº›æ˜¯æ¼”ç¤ºè´¦æˆ·ï¼Œä»…ç”¨äºåŠŸèƒ½æµ‹è¯•ã€‚ç”Ÿäº§ç¯å¢ƒä¸­è¯·åŠæ—¶ä¿®æ”¹æˆ–åˆ é™¤è¿™äº›é»˜è®¤è´¦æˆ·ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ä¸€é”®ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./manage.sh help

# äº¤äº’å¼èœå•
./manage.sh

# å¸¸ç”¨å‘½ä»¤
./manage.sh install    # å®‰è£…æ‰€æœ‰ä¾èµ–
./manage.sh build      # æ„å»ºæ‰€æœ‰é¡¹ç›®
./manage.sh dev        # å¯åŠ¨å¼€å‘ç¯å¢ƒ
./manage.sh start      # å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
./manage.sh status     # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```

### æ‰‹åŠ¨å¯åŠ¨

1. **å®‰è£…ä¾èµ–**
   ```bash
   # åç«¯ä¾èµ–
   cd backend && npm install
   
   # å‰ç«¯ä¾èµ–
   cd ../frontend && npm install
   ```

2. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**
   ```bash
   # å¯åŠ¨åç«¯ (ç«¯å£: 3001)
   cd backend && npm run dev &
   
   # å¯åŠ¨å‰ç«¯ (ç«¯å£: 5173)
   cd frontend && npm run dev
   ```

3. **è®¿é—®åº”ç”¨**
   - å‰ç«¯: http://localhost:5173
   - åç«¯API: http://localhost:3001

## ğŸ“§ é‚®ç®±éªŒè¯é…ç½®

ç³»ç»Ÿæ”¯æŒçœŸå®é‚®ç®±éªŒè¯ç å‘é€åŠŸèƒ½ï¼š

### é…ç½®é‚®ç®±æœåŠ¡
1. **QQé‚®ç®±é…ç½®**ï¼ˆæ¨èï¼‰
   ```bash
   EMAIL_HOST=smtp.qq.com
   EMAIL_PORT=587
   EMAIL_SECURE=false
   EMAIL_USER=your-email@qq.com
   EMAIL_PASS=your-16-digit-auth-code
   EMAIL_FROM=your-email@qq.com
   EMAIL_ENABLED=true
   ```

2. **è·å–QQé‚®ç®±æˆæƒç **
   - ç™»å½•QQé‚®ç®± â†’ è®¾ç½® â†’ è´¦æˆ·
   - å¼€å¯"IMAP/SMTPæœåŠ¡"
   - å‘é€çŸ­ä¿¡è·å–16ä½æˆæƒç 

3. **å…¶ä»–é‚®ç®±æœåŠ¡å•†**
   - Gmail: smtp.gmail.com:587
   - 163é‚®ç®±: smtp.163.com:587
   - è¯¦ç»†é…ç½®è¯·å‚è€ƒ: [é‚®ç®±é…ç½®æŒ‡å—](docs/EMAIL_SETUP_GUIDE.md)

### é‚®ä»¶ç‰¹æ€§
- ğŸ¨ ç¾è§‚çš„HTMLé‚®ä»¶æ¨¡æ¿
- ğŸ” 6ä½æ•°å­—éªŒè¯ç 
- â° 5åˆ†é’Ÿæœ‰æ•ˆæœŸ
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‰‹æœºæŸ¥çœ‹

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

#### å¿«é€Ÿå¯åŠ¨
```bash
# ä½¿ç”¨ç®¡ç†è„šæœ¬ä¸€é”®å¯åŠ¨
./manage.sh quick-start

# æˆ–è€…ä½¿ç”¨æµ‹è¯•è„šæœ¬
./test-services.sh
```

#### æ‰‹åŠ¨å¯åŠ¨
```bash
# å¯åŠ¨åç«¯
cd backend && npm install && npm start &

# å¯åŠ¨å‰ç«¯
cd frontend && npm install && npm run dev &
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### Renderå¹³å°éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **å‡†å¤‡éƒ¨ç½²**
   ```bash
   # è¿è¡Œéƒ¨ç½²å‡†å¤‡è„šæœ¬
   ./prepare-deploy.sh
   ```

2. **æ¨é€ä»£ç åˆ°Gitä»“åº“**
   ```bash
   git add .
   git commit -m "å‡†å¤‡éƒ¨ç½²åˆ°Render"
   git push origin main
   ```

3. **åœ¨Renderåˆ›å»ºæœåŠ¡**
   - åç«¯æœåŠ¡ï¼šWeb Service
   - å‰ç«¯æœåŠ¡ï¼šStatic Site
   
   è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ï¼š[éƒ¨ç½²æŒ‡å—](DEPLOYMENT_GUIDE.md)

4. **éªŒè¯éƒ¨ç½²**
   - åç«¯å¥åº·æ£€æŸ¥ï¼š`https://your-backend.onrender.com/api/health`
   - å‰ç«¯è®¿é—®ï¼š`https://your-frontend.onrender.com`

#### å…¶ä»–éƒ¨ç½²å¹³å°
- **Vercel**: é€‚åˆå‰ç«¯é™æ€ç½‘ç«™éƒ¨ç½²
- **Heroku**: é€‚åˆå…¨æ ˆåº”ç”¨éƒ¨ç½²
- **Netlify**: é€‚åˆå‰ç«¯éƒ¨ç½²
- **Railway**: é€‚åˆåç«¯APIéƒ¨ç½²

### ç¯å¢ƒå˜é‡é…ç½®

#### åç«¯ç¯å¢ƒå˜é‡
```bash
NODE_ENV=production
PORT=3000
JWT_SECRET=your-super-secret-jwt-key
FRONTEND_URL=https://your-frontend-domain.com

# é‚®ç®±æœåŠ¡é…ç½®
EMAIL_HOST=smtp.qq.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@qq.com
EMAIL_PASS=your-auth-code
EMAIL_FROM=your-email@qq.com
EMAIL_ENABLED=true
```

#### å‰ç«¯ç¯å¢ƒå˜é‡
```bash
VITE_API_BASE_URL=https://your-backend-domain.com
VITE_APP_TITLE=æ™ºæ…§å°åŒºç”Ÿæ´»å¹³å°
VITE_NODE_ENV=production
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **React 18** - ç”¨æˆ·ç•Œé¢åº“
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **React Router** - å®¢æˆ·ç«¯è·¯ç”±
- **Context API** - çŠ¶æ€ç®¡ç†

### åç«¯æŠ€æœ¯
- **Node.js** - JavaScriptè¿è¡Œæ—¶
- **TypeScript** - ç±»å‹å®‰å…¨å¼€å‘
- **Express.js** - Webåº”ç”¨æ¡†æ¶
- **SQLite** - è½»é‡çº§æ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **bcryptjs** - å¯†ç åŠ å¯†
- **Joi** - æ•°æ®éªŒè¯
- **Nodemailer** - é‚®ä»¶å‘é€æœåŠ¡

## ğŸ“ é¡¹ç›®ç»“æ„

### å‰ç«¯ç»“æ„
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/       # React Context
â”‚   â”œâ”€â”€ services/       # APIæœåŠ¡
â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ types.ts        # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

### åç«¯ç»“æ„
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/         # APIè·¯ç”±
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡æœåŠ¡ï¼ˆé‚®ç®±ã€çŸ­ä¿¡ç­‰ï¼‰
â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ types/          # ç±»å‹å®šä¹‰
â”œâ”€â”€ data/               # SQLiteæ•°æ®åº“
â”œâ”€â”€ logs/               # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ start-with-env.sh   # ç¯å¢ƒå˜é‡å¯åŠ¨è„šæœ¬
â””â”€â”€ package.json
```

## ğŸ”§ ç®¡ç†è„šæœ¬åŠŸèƒ½

### å¼€å‘ç›¸å…³
- `install` - å®‰è£…æ‰€æœ‰ä¾èµ–
- `build` - æ„å»ºæ‰€æœ‰é¡¹ç›®
- `dev` - å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆå‰åç«¯åŒæ—¶å¯åŠ¨ï¼‰
- `start` - å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ

### æœåŠ¡ç®¡ç†
- `stop` - åœæ­¢æ‰€æœ‰æœåŠ¡
- `status` - æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- `logs` - æŸ¥çœ‹æœåŠ¡æ—¥å¿—

### æµ‹è¯•å’Œéƒ¨ç½²
- `test` - è¿è¡Œæµ‹è¯•
- `deploy` - éƒ¨ç½²ç®¡ç†
- `manage` - é¡¹ç›®ç®¡ç†ï¼ˆæ¸…ç†ã€æ›´æ–°ç­‰ï¼‰

## ğŸŒ éƒ¨ç½²æŒ‡å—

### Renderå¹³å°éƒ¨ç½²

1. **åç«¯éƒ¨ç½²**
   - ä½¿ç”¨ `backend/render.yaml` é…ç½®
   - è‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²Node.jsåº”ç”¨
   - é…ç½®ç¯å¢ƒå˜é‡å’ŒæŒä¹…åŒ–å­˜å‚¨

2. **å‰ç«¯éƒ¨ç½²**
   - ä½¿ç”¨ `frontend/render.yaml` é…ç½®
   - é™æ€ç«™ç‚¹éƒ¨ç½²
   - è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ

è¯¦ç»†éƒ¨ç½²æ­¥éª¤è¯·å‚è€ƒï¼š
- [åç«¯éƒ¨ç½²æŒ‡å—](./backend/DEPLOYMENT.md)
- [å‰ç«¯éƒ¨ç½²æŒ‡å—](./frontend/DEPLOYMENT.md)

### Dockeréƒ¨ç½²

```bash
# æ„å»ºåç«¯é•œåƒ
cd backend && docker build -t smart-community-backend .

# æ„å»ºå‰ç«¯é•œåƒ
cd frontend && docker build -t smart-community-frontend .

# ä½¿ç”¨docker-composeå¯åŠ¨
docker-compose up -d
```

## ğŸ§ª æµ‹è¯•

### APIæµ‹è¯•
```bash
# ä½¿ç”¨ç®¡ç†è„šæœ¬
./manage.sh test

# æˆ–æ‰‹åŠ¨æµ‹è¯•
cd backend && node test-api.js

# é‚®ç®±åŠŸèƒ½æµ‹è¯•
./test-email-registration.sh
./test-real-email.sh your-email@example.com
```

### å‰ç«¯æµ‹è¯•
```bash
cd frontend && npm test
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### ä¸»è¦æ•°æ®è¡¨
- **users** - ç”¨æˆ·ä¿¡æ¯ï¼ˆé‚®ç®±æ³¨å†Œï¼‰
- **suggestions** - å»ºè®®åé¦ˆ
- **suggestion_progress** - å»ºè®®å¤„ç†è¿›åº¦
- **market_items** - äºŒæ‰‹å¸‚åœºç‰©å“
- **announcements** - å…¬å‘Šä¿¡æ¯

### ç”¨æˆ·è¡¨ç»“æ„
```sql
CREATE TABLE users (
  id TEXT PRIMARY KEY,
  email TEXT UNIQUE,           -- é‚®ç®±ï¼ˆå¿…å¡«ï¼‰
  password TEXT NOT NULL,
  name TEXT NOT NULL,
  role TEXT NOT NULL,
  building TEXT,               -- æ¥¼æ ‹
  unit TEXT,                   -- å•å…ƒå·
  room TEXT,                   -- æˆ¿é—´å·
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ” å®‰å…¨ç‰¹æ€§

- **JWT tokenè®¤è¯**: 7å¤©æœ‰æ•ˆæœŸ
- **å¯†ç bcryptåŠ å¯†**: 10è½®åŠ å¯†
- **è§’è‰²æƒé™æ§åˆ¶**: ä¸‰çº§æƒé™ç®¡ç†
- **è¾“å…¥æ•°æ®éªŒè¯**: JoiéªŒè¯åº“
- **CORSè·¨åŸŸä¿æŠ¤**: é…ç½®å…è®¸çš„åŸŸå
- **éªŒè¯ç å®‰å…¨**: 5åˆ†é’Ÿæœ‰æ•ˆæœŸï¼Œé˜²æš´åŠ›ç ´è§£
- **é‚®ç®±éªŒè¯**: é˜²æ­¢æ¶æ„æ³¨å†Œ

## ğŸ¯ å¼€å‘è§„èŒƒ

- TypeScriptä¸¥æ ¼æ¨¡å¼
- ESLintä»£ç æ£€æŸ¥
- Prettierä»£ç æ ¼å¼åŒ–
- Gitæäº¤è§„èŒƒ
- API RESTfulè®¾è®¡

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- Viteå¿«é€Ÿæ„å»º
- ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- é™æ€èµ„æºä¼˜åŒ–
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç 
4. åˆ›å»ºPull Request

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-05-31)
- âœ¨ æ–°å¢é‚®ç®±éªŒè¯æ³¨å†ŒåŠŸèƒ½
- âœ¨ æ”¯æŒå•å…ƒå·å­—æ®µ
- âœ¨ ç¾è§‚çš„HTMLé‚®ä»¶æ¨¡æ¿
- ğŸ”§ ä¼˜åŒ–ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸ“š å®Œå–„æ–‡æ¡£å’Œé…ç½®æŒ‡å—

### v1.0.0 (2024-01-01)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®Œæ•´çš„å‰åç«¯åŠŸèƒ½
- éƒ¨ç½²é…ç½®å’Œæ–‡æ¡£

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- é¡¹ç›®æ–‡æ¡£: [README.md](./README.md)
- åç«¯æ–‡æ¡£: [backend/README.md](./backend/README.md)
- å‰ç«¯æ–‡æ¡£: [frontend/README.md](./frontend/README.md)
- éƒ¨ç½²æŒ‡å—: [DEPLOYMENT.md](./backend/DEPLOYMENT.md)
- é‚®ç®±é…ç½®: [docs/EMAIL_SETUP_GUIDE.md](docs/EMAIL_SETUP_GUIDE.md)
- ç”¨æˆ·æŒ‡å—: [docs/USER_GUIDE.md](docs/USER_GUIDE.md)

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ‰ å¿«é€Ÿä½“éªŒ

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd æ™ºæ…§å°åŒºç”Ÿæ´»å¹³å°

# ä¸€é”®å¯åŠ¨
./manage.sh install
./manage.sh dev

# è®¿é—®åº”ç”¨
open http://localhost:5173

# ä½¿ç”¨æ¼”ç¤ºè´¦æˆ·ç™»å½•æµ‹è¯•
# ä¸šä¸»: resident@example.com / password123
# ç‰©ä¸š: property@example.com / property123  
# ç®¡ç†å‘˜: admin@example.com / admin123
```

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ ğŸ âœ¨
