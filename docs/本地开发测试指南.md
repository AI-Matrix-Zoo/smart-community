# æ™ºæ…§momaç”Ÿæ´»å¹³å° - æœ¬åœ°å¼€å‘æµ‹è¯•æŒ‡å—

## ğŸ”§ æœ€æ–°ä¿®å¤ (2024-06-02)

**é—®é¢˜ä¿®å¤ï¼š**
- âœ… ä¿®å¤äº† `quick-start.sh` å¯åŠ¨å¡ä½çš„é—®é¢˜
- âœ… å¢å¼ºäº† `unified-manager.sh` çš„é”™è¯¯å¤„ç†å’Œä¾èµ–æ£€æŸ¥
- âœ… æ·»åŠ äº†è‡ªåŠ¨ç«¯å£æ¸…ç†å’Œè¶…æ—¶å¤„ç†
- âœ… æ”¹è¿›äº†äº¤äº’å¼å¯åŠ¨çš„ç¨³å®šæ€§

**ä¿®å¤å†…å®¹ï¼š**
1. **è‡ªåŠ¨ä¾èµ–æ£€æŸ¥**ï¼šå¯åŠ¨å‰è‡ªåŠ¨æ£€æŸ¥å¹¶å®‰è£…ç¼ºå¤±çš„ä¾èµ–
2. **æ™ºèƒ½ç«¯å£ç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†å ç”¨çš„ç«¯å£ï¼Œé¿å…å†²çª
3. **å¢å¼ºé”™è¯¯å¤„ç†**ï¼šæ·»åŠ äº†æ„å»ºå¤±è´¥æ£€æµ‹å’Œè‡ªåŠ¨é‡è¯•
4. **è¶…æ—¶ä¿æŠ¤**ï¼šé˜²æ­¢å¯åŠ¨è¿‡ç¨‹æ— é™ç­‰å¾…
5. **æ›´å¥½çš„ç”¨æˆ·åé¦ˆ**ï¼šæä¾›è¯¦ç»†çš„å¯åŠ¨çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯

---

## ğŸ“‹ ç›®å½•

- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç»Ÿä¸€ç®¡ç†è„šæœ¬](#ç»Ÿä¸€ç®¡ç†è„šæœ¬)
- [å¼€å‘ç¯å¢ƒé…ç½®](#å¼€å‘ç¯å¢ƒé…ç½®)
- [æœ¬åœ°å¯åŠ¨æ–¹å¼](#æœ¬åœ°å¯åŠ¨æ–¹å¼)
- [æµ‹è¯•æµç¨‹](#æµ‹è¯•æµç¨‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [ç«¯å£é…ç½®](#ç«¯å£é…ç½®)
- [æ¼”ç¤ºè´¦æˆ·](#æ¼”ç¤ºè´¦æˆ·)

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Node.js**: 18.0+ (æ¨è 18.17.0 æˆ–æ›´é«˜ç‰ˆæœ¬)
- **npm**: 9.0+ (é€šå¸¸éš Node.js ä¸€èµ·å®‰è£…)
- **Git**: ç”¨äºç‰ˆæœ¬æ§åˆ¶

### å¯é€‰è½¯ä»¶
- **PM2**: ç”¨äºè¿›ç¨‹ç®¡ç† (å¯é€‰ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹)
- **VS Code**: æ¨èçš„å¼€å‘ç¯å¢ƒ

### ç³»ç»Ÿå…¼å®¹æ€§
- âœ… macOS (æ¨è)
- âœ… Linux (Ubuntu/CentOS)
- âœ… Windows (WSL2 æ¨è)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <é¡¹ç›®åœ°å€>
cd æ™ºæ…§å°åŒºç”Ÿæ´»å¹³å°
```

### 2. ä½¿ç”¨ç»Ÿä¸€ç®¡ç†è„šæœ¬
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x unified-manager.sh

# å®‰è£…ä¾èµ–
./unified-manager.sh install

# åˆå§‹åŒ–é…ç½®
./unified-manager.sh init

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./unified-manager.sh dev
```

## ğŸ“œ ç»Ÿä¸€ç®¡ç†è„šæœ¬

### è„šæœ¬åŠŸèƒ½
`unified-manager.sh` æ˜¯åˆå¹¶äº† `dev-manager.sh` å’Œ `manage.sh` åŠŸèƒ½çš„ç»Ÿä¸€ç®¡ç†è„šæœ¬ï¼Œæä¾›ï¼š

- âœ… å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´ç®¡ç†
- âœ… è‡ªåŠ¨ç«¯å£æ£€æµ‹å’Œé‡Šæ”¾
- âœ… ç¯å¢ƒé…ç½®è‡ªåŠ¨ç”Ÿæˆ
- âœ… æœåŠ¡çŠ¶æ€ç›‘æ§
- âœ… æ—¥å¿—ç®¡ç†

### å¯ç”¨å‘½ä»¤

#### åŸºç¡€å‘½ä»¤
```bash
./unified-manager.sh install     # å®‰è£…é¡¹ç›®ä¾èµ–
./unified-manager.sh init        # åˆå§‹åŒ–é¡¹ç›®é…ç½®
./unified-manager.sh status      # æŸ¥çœ‹é¡¹ç›®çŠ¶æ€
./unified-manager.sh clean       # æ¸…ç†é¡¹ç›®æ–‡ä»¶
./unified-manager.sh reset       # é‡ç½®é¡¹ç›®
```

#### å¼€å‘ç¯å¢ƒ
```bash
./unified-manager.sh dev         # å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆäº¤äº’å¼ï¼‰
./unified-manager.sh dev-start   # å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆåå°è¿è¡Œï¼‰
./unified-manager.sh dev-stop    # åœæ­¢å¼€å‘ç¯å¢ƒ
```

#### ç”Ÿäº§ç¯å¢ƒ
```bash
./unified-manager.sh build       # æ„å»ºé¡¹ç›®
./unified-manager.sh deploy      # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
./unified-manager.sh prod-stop   # åœæ­¢ç”Ÿäº§æœåŠ¡
```

## âš™ï¸ å¼€å‘ç¯å¢ƒé…ç½®

### è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®æ–‡ä»¶

#### åç«¯å¼€å‘é…ç½® (`backend/.env.development`)
```env
# å¼€å‘ç¯å¢ƒé…ç½®
PORT=3001
NODE_ENV=development

# JWTé…ç½®
JWT_SECRET=dev-secret-key-2024
JWT_EXPIRES_IN=7d

# æ•°æ®åº“é…ç½®
DB_PATH=./database/community_dev.db

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880

# CORSé…ç½®
FRONTEND_URL=http://localhost:5174

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=debug

# çŸ­ä¿¡æœåŠ¡é…ç½®
SMS_ENABLED=true
SMS_PROVIDER=twilio

# é‚®ç®±æœåŠ¡é…ç½®
EMAIL_ENABLED=false
```

#### å‰ç«¯å¼€å‘é…ç½® (`frontend/.env.development`)
```env
# å¼€å‘ç¯å¢ƒé…ç½®
VITE_API_BASE_URL=http://localhost:3001/api
VITE_APP_TITLE=æ™ºæ…§momaç”Ÿæ´»å¹³å°ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
VITE_APP_ENV=development
```

### æ‰‹åŠ¨é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å¯ç”¨çŸ­ä¿¡æˆ–é‚®ç®±åŠŸèƒ½ï¼Œè¯·åœ¨ `backend/.env.development` ä¸­é…ç½®ï¼š

```env
# TwilioçŸ­ä¿¡æœåŠ¡é…ç½®
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=your_phone_number

# é‚®ç®±æœåŠ¡é…ç½®
EMAIL_HOST=smtp.qq.com
EMAIL_PORT=587
EMAIL_USER=your-email@qq.com
EMAIL_PASS=your-email-password
EMAIL_FROM=æ™ºæ…§å°åŒºå¼€å‘ <your-email@qq.com>
EMAIL_ENABLED=true
```

## ğŸƒâ€â™‚ï¸ æœ¬åœ°å¯åŠ¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šäº¤äº’å¼å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
./unified-manager.sh dev
```
- âœ… å‰ç«¯å’Œåç«¯åŒæ—¶å¯åŠ¨
- âœ… å®æ—¶æ˜¾ç¤ºæ—¥å¿—è¾“å‡º
- âœ… æ”¯æŒçƒ­é‡è½½
- âœ… Ctrl+C åœæ­¢æ‰€æœ‰æœåŠ¡

### æ–¹å¼äºŒï¼šåå°å¯åŠ¨
```bash
./unified-manager.sh dev-start
```
- âœ… æœåŠ¡åœ¨åå°è¿è¡Œ
- âœ… æ—¥å¿—ä¿å­˜åˆ°æ–‡ä»¶
- âœ… é€‚åˆé•¿æ—¶é—´å¼€å‘

åœæ­¢åå°æœåŠ¡ï¼š
```bash
./unified-manager.sh dev-stop
```

### æ–¹å¼ä¸‰ï¼šåˆ†åˆ«å¯åŠ¨ï¼ˆæ‰‹åŠ¨ï¼‰

#### å¯åŠ¨åç«¯
```bash
cd backend
npm run dev
```

#### å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm run dev -- --port 5174
```

### æ–¹å¼å››ï¼šä½¿ç”¨åŸæœ‰è„šæœ¬
```bash
# ä½¿ç”¨å¼€å‘ç¯å¢ƒè„šæœ¬
./dev-manager.sh start

# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒè„šæœ¬
./manage.sh dev
```

## ğŸ§ª æµ‹è¯•æµç¨‹

### 1. ç¯å¢ƒéªŒè¯
```bash
# æ£€æŸ¥é¡¹ç›®çŠ¶æ€
./unified-manager.sh status

# é¢„æœŸè¾“å‡ºï¼š
# âœ… åç«¯ä¾èµ–: å·²å®‰è£…
# âœ… å‰ç«¯ä¾èµ–: å·²å®‰è£…
# âœ… å‰ç«¯å¼€å‘æœåŠ¡å™¨: è¿è¡Œä¸­ (PID: xxxx, ç«¯å£: 5174)
# âœ… åç«¯å¼€å‘æœåŠ¡å™¨: è¿è¡Œä¸­ (PID: xxxx, ç«¯å£: 3001)
```

### 2. åŠŸèƒ½æµ‹è¯•

#### è®¿é—®å‰ç«¯åº”ç”¨
- æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:5174
- æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
- æµ‹è¯•ç”¨æˆ·æ³¨å†Œ/ç™»å½•åŠŸèƒ½

#### æµ‹è¯•åç«¯API
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3001/health

# ç”¨æˆ·æ³¨å†Œæµ‹è¯•
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "password123",
    "phone": "13800138000",
    "role": "resident"
  }'
```

#### æ•°æ®åº“éªŒè¯
```bash
# æ£€æŸ¥å¼€å‘æ•°æ®åº“
ls -la backend/database/
# åº”è¯¥çœ‹åˆ° community_dev.db æ–‡ä»¶
```

### 3. æ—¥å¿—æ£€æŸ¥
```bash
# æŸ¥çœ‹å¼€å‘ç¯å¢ƒæ—¥å¿—
tail -f logs/dev-backend-*.log
tail -f logs/dev-frontend-*.log
```

## â“ å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ
**A:** ç»Ÿä¸€ç®¡ç†è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é‡Šæ”¾è¢«å ç”¨çš„ç«¯å£ã€‚å¦‚æœä»æœ‰é—®é¢˜ï¼š
```bash
# æ‰‹åŠ¨æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :5174  # å‰ç«¯ç«¯å£
lsof -i :3001  # åç«¯ç«¯å£

# æ‰‹åŠ¨ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>
```

### Q2: ä¾èµ–å®‰è£…å¤±è´¥ï¼Ÿ
**A:** å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š
```bash
# æ¸…ç† npm ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules é‡æ–°å®‰è£…
./unified-manager.sh clean
./unified-manager.sh install
```

### Q3: TypeScript ç¼–è¯‘é”™è¯¯ï¼Ÿ
**A:** æ£€æŸ¥ Node.js ç‰ˆæœ¬å’Œä¾èµ–ï¼š
```bash
# æ£€æŸ¥ç‰ˆæœ¬
node --version  # åº”è¯¥ >= 18.0
npm --version   # åº”è¯¥ >= 9.0

# é‡æ–°æ„å»º
cd backend
npm run build
```

### Q4: å‰ç«¯é¡µé¢æ— æ³•è®¿é—®åç«¯APIï¼Ÿ
**A:** æ£€æŸ¥ CORS é…ç½®å’Œç¯å¢ƒå˜é‡ï¼š
```bash
# æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
curl http://localhost:3001/health

# æ£€æŸ¥å‰ç«¯ç¯å¢ƒé…ç½®
cat frontend/.env.development
```

### Q5: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
**A:** æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶å’Œæƒé™ï¼š
```bash
# æ£€æŸ¥æ•°æ®åº“ç›®å½•
ls -la backend/database/

# é‡æ–°åˆå§‹åŒ–
./unified-manager.sh reset
```

## ğŸ”Œ ç«¯å£é…ç½®

### å¼€å‘ç¯å¢ƒç«¯å£
- **å‰ç«¯**: http://localhost:5174
- **åç«¯**: http://localhost:3001
- **API**: http://localhost:3001/api
- **å¥åº·æ£€æŸ¥**: http://localhost:3001/health

### ç”Ÿäº§ç¯å¢ƒç«¯å£
- **å‰ç«¯**: http://localhost:5173
- **åç«¯**: http://localhost:3000
- **API**: http://localhost:3000/api

### ç«¯å£å†²çªè§£å†³
å¦‚æœéœ€è¦ä¿®æ”¹ç«¯å£ï¼Œç¼–è¾‘ `unified-manager.sh` ä¸­çš„ç«¯å£é…ç½®ï¼š
```bash
# ç«¯å£é…ç½®
DEV_PORT_FRONTEND=5174  # å¼€å‘ç¯å¢ƒå‰ç«¯ç«¯å£
DEV_PORT_BACKEND=3001   # å¼€å‘ç¯å¢ƒåç«¯ç«¯å£
PROD_PORT_FRONTEND=5173 # ç”Ÿäº§ç¯å¢ƒå‰ç«¯ç«¯å£
PROD_PORT_BACKEND=3000  # ç”Ÿäº§ç¯å¢ƒåç«¯ç«¯å£
```

## ğŸ‘¥ æ¼”ç¤ºè´¦æˆ·

ç³»ç»Ÿé¢„ç½®äº†ä»¥ä¸‹æµ‹è¯•è´¦æˆ·ï¼š

### ä¸šä¸»è´¦æˆ·
- **é‚®ç®±**: resident@example.com
- **å¯†ç **: password123
- **æƒé™**: æŸ¥çœ‹å…¬å‘Šã€æŠ¥ä¿®ã€ç¼´è´¹ã€æŠ•è¯‰å»ºè®®

### ç‰©ä¸šç®¡ç†å‘˜
- **é‚®ç®±**: property@example.com
- **å¯†ç **: property123
- **æƒé™**: å¤„ç†æŠ¥ä¿®ã€ç®¡ç†å…¬å‘Šã€æŸ¥çœ‹æŠ•è¯‰

### ç³»ç»Ÿç®¡ç†å‘˜
- **é‚®ç®±**: admin@example.com
- **å¯†ç **: admin123
- **æƒé™**: å…¨éƒ¨åŠŸèƒ½ã€ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿè®¾ç½®

## ğŸ“ å¼€å‘å»ºè®®

### 1. ä»£ç è§„èŒƒ
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ª TypeScript ç±»å‹å®šä¹‰
- æäº¤å‰è¿è¡Œæµ‹è¯•

### 2. è°ƒè¯•æŠ€å·§
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- æŸ¥çœ‹ç½‘ç»œè¯·æ±‚å’Œå“åº”
- æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### 3. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ React DevTools
- ç›‘æ§ API å“åº”æ—¶é—´
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢

### 4. å®‰å…¨æ³¨æ„äº‹é¡¹
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†é…ç½®
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

### æ›´æ–°ä¾èµ–
```bash
# æ£€æŸ¥è¿‡æ—¶çš„åŒ…
npm outdated

# æ›´æ–°æ‰€æœ‰ä¾èµ–
./unified-manager.sh clean
./unified-manager.sh install
```

### æ•°æ®åº“è¿ç§»
```bash
# å¤‡ä»½ç°æœ‰æ•°æ®
cp backend/database/community_dev.db backend/database/community_dev.db.backup

# é‡æ–°åˆå§‹åŒ–ï¼ˆä¼šä¸¢å¤±æ•°æ®ï¼‰
./unified-manager.sh reset
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®çš„ GitHub Issues
3. è”ç³»å¼€å‘å›¢é˜Ÿ

**ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼** ğŸ‰ 