# 智慧小区生活平台 - 用户指南

## 🌐 访问地址

**前端页面**: http://123.56.64.5/
**API接口**: http://123.56.64.5/api/

## 👥 测试账号

### 普通用户账号
- **手机号**: 13800138000
- **密码**: password123
- **用户**: 张三 (1栋-101)

- **手机号**: 13900139000
- **密码**: password123
- **用户**: 李四 (2栋-202)

### 物业管理员账号
- **手机号**: property_phone_01
- **密码**: property123
- **用户**: 物业小王

### 系统管理员账号
- **手机号**: admin_phone_01
- **密码**: admin123
- **用户**: 管理员小赵

## 🚀 功能介绍

### 1. 用户认证
- 用户注册和登录
- 基于JWT的身份验证
- 角色权限管理（用户/物业/管理员）

### 2. 建议反馈
- 提交社区建议
- 查看建议处理进度
- 管理员可以更新建议状态

### 3. 二手市场
- 发布二手物品（支持图片上传，最大50MB）
- 浏览和搜索商品
- 联系卖家

### 4. 社区公告
- 查看最新公告
- 物业和管理员可发布公告

## 🔧 技术特性

- **响应式设计**: 支持手机、平板、电脑访问
- **实时更新**: 数据实时同步
- **安全认证**: JWT令牌认证
- **文件上传**: 支持图片上传（最大50MB）
- **数据持久化**: SQLite数据库存储

## 📱 使用步骤

1. **访问网站**: 在浏览器中打开 http://123.56.64.5/
2. **登录系统**: 使用上述测试账号登录
3. **探索功能**: 
   - 点击"建议反馈"提交社区建议
   - 访问"二手市场"查看或发布商品
   - 查看"社区公告"了解最新动态
4. **个人中心**: 管理个人信息和历史记录

## 📸 图片上传说明

### 闲置物品发布
- **支持格式**: JPG, PNG, GIF等常见图片格式
- **文件大小**: 最大50MB
- **建议尺寸**: 建议图片宽度不超过1920px，以获得最佳显示效果
- **上传方式**: 选择图片后会自动预览，确认无误后提交

### 注意事项
- 请确保图片清晰，能够准确展示物品状况
- 避免上传过大的图片文件，以免影响加载速度
- 如果上传失败，请检查图片大小是否超过限制

## 🛠️ 管理员功能

### 物业管理员
- 处理用户建议反馈
- 发布社区公告
- 查看用户统计

### 系统管理员
- 用户管理
- 系统配置
- 数据统计

## 🔍 API接口测试

### 健康检查
```bash
curl http://123.56.64.5/api/health
```

### 用户登录
```bash
curl -X POST http://123.56.64.5/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"13800138000","password":"password123"}'
```

### 获取建议列表
```bash
curl http://123.56.64.5/api/suggestions
```

## 📞 技术支持

如果遇到问题，请检查：

1. **服务状态**: 运行 `./check-deployment.sh` 检查所有服务
2. **后端日志**: `pm2 logs smart-community-backend`
3. **Nginx日志**: `tail -f /var/log/nginx/error.log`

### 常见问题解决

#### 文件上传失败
- 检查图片大小是否超过50MB
- 确认网络连接稳定
- 尝试使用较小的图片文件

#### 登录问题
- 确认使用正确的手机号和密码
- 检查网络连接
- 清除浏览器缓存后重试

## 🔄 服务管理

### 重启服务
```bash
# 重启后端
pm2 restart smart-community-backend

# 重启Nginx
systemctl restart nginx
```

### 查看状态
```bash
# 查看PM2进程
pm2 status

# 查看Nginx状态
systemctl status nginx
```

---

**部署时间**: 2025年5月30日
**服务器**: 阿里云 (123.56.64.5)
**版本**: 1.0.0
**最后更新**: 2025年5月31日 - 修复文件上传问题

## 项目概述

智慧小区生活平台是一个现代化的社区管理系统，为业主提供便捷的社区服务。

## 功能特性

### 🔐 用户认证系统
- **手机号注册**：支持手机验证码注册
- **安全登录**：JWT令牌认证
- **角色管理**：普通用户、物业管理员、系统管理员

### 📱 手机验证码功能（新增）
- **验证码发送**：注册时发送6位数字验证码
- **安全验证**：5分钟有效期，验证后自动失效
- **防刷机制**：限制发送频率，防止恶意使用

### 🏠 用户信息管理（增强）
- **详细地址**：楼栋号、单元号、房号
- **个人信息**：姓名、手机号
- **显示格式**：姓名 (楼栋-单元-房号)

### 💡 建议反馈
- **提交建议**：业主可提交各类建议
- **状态跟踪**：已提交、处理中、已解决、已驳回
- **进度更新**：物业和管理员可更新处理进度

### 🛒 二手市场
- **发布商品**：支持图片上传（最大50MB）
- **商品分类**：家具家电、母婴用品、数码产品等
- **联系方式**：卖家联系信息

### 📢 社区公告
- **发布公告**：管理员发布重要通知
- **实时更新**：最新公告优先显示

## 新用户注册流程

### 1. 访问注册页面
访问 http://123.56.64.5/ 点击"注册"按钮

### 2. 填写注册信息
- **手机号码**：输入11位手机号
- **获取验证码**：点击"发送验证码"按钮
- **短信验证码**：输入收到的6位验证码
- **密码设置**：至少6位字符
- **个人信息**：
  - 您的称呼：如"张三"、"李女士"
  - 楼栋号：如"1栋"、"A座"
  - 单元号：如"1单元"、"2单元"
  - 房号：如"101"、"2003"

### 3. 提交注册
点击"注册"按钮完成注册

### 4. 登录使用
注册成功后可直接登录使用系统

## 功能使用指南

### 建议反馈
1. 登录后点击"建议反馈"
2. 填写建议标题和详细描述
3. 选择建议分类
4. 提交后可查看处理状态

### 二手市场
1. 点击"二手市场"查看商品
2. 点击"发布商品"添加新商品
3. 支持上传商品图片
4. 填写商品信息和联系方式

### 社区公告
1. 首页显示最新公告
2. 点击"社区公告"查看所有公告
3. 管理员可发布新公告

## 技术特性

### 前端技术
- React 18 + TypeScript
- Vite 构建工具
- Tailwind CSS 样式框架
- 响应式设计

### 后端技术
- Node.js + Express
- TypeScript
- SQLite 数据库
- JWT 认证
- 阿里云短信服务

### 部署架构
- Nginx 反向代理
- PM2 进程管理
- 阿里云服务器

## 安全特性

### 数据安全
- 密码加密存储（bcrypt）
- JWT令牌认证
- 请求体大小限制
- SQL注入防护

### 验证码安全
- 5分钟有效期
- 验证后自动失效
- 发送频率限制
- 缓存机制

## 系统要求

### 浏览器支持
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 移动端支持
- iOS Safari 14+
- Android Chrome 90+

## 联系支持

如有问题或建议，请联系系统管理员。

---

**版本**：v1.2.0  
**更新时间**：2025年5月31日  
**新增功能**：手机验证码注册、单元号字段 